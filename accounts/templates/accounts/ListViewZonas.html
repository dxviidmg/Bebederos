{%extends 'base.html'%}

{%block content%}


	<h1>Lista de municipios de {{entidad}}</h1>

	{%if entidad.EscuelasCount%}{%endif%}
	<p><a href="{%url 'accounts:ListViewPartidas' region.numero%}">Regresar</a></p>
	<p>Escuelas asignadas: {{entidad.escuelas_asignadas}}</p>
	<p>Escuelas registradas: {{entidad.escuelas_registradas}}</p>
	<p>Escuelas aceptadas: {{entidad.escuelas_aceptadas}}</p>
	<p>Escuelas pendientes: {{entidad.escuelas_pendientes}}</p>
	<p>Escuelas rechazadas: {{entidad.escuelas_rechazadas}}</p>
	<div class="row justify-content-center" >

		<div class="table-responsive text-center">
			<table class="table table-bordered">
				<thead>
				<tr>
					<th rowspan="2">Zona</th>
					<th rowspan="2">Municipio</th>
					<th colspan="4">Escuelas</th>
				</tr>
				<tr>
					<th>Registradas</th>
					<th>Aceptadas</th>
					<th>Pendientes</th>
					<th>Rechazadas</th>
				</tr>
				</thead>
				<tbody>

					{%for MunicipiosPorZona in ListMunicipiosPorZona%}

						{%for municipio in MunicipiosPorZona.municipios%}

					<tr>

							{%if forloop.first%}
						
						<td rowspan=" {{MunicipiosPorZona.municipios|length}}">{{MunicipiosPorZona.zona}}
						</td>

							{%endif%}

						<td><a href="{%url 'accounts:ListViewEscuelas' municipio.pk%}">{{municipio.nombre}}</a> 
						</td>
						<td>{{municipio.escuelas_registradas}} {%if municipio.EscuelasCount %}{%endif%}</td>
						<td>{{municipio.escuelas_aceptadas}}</td>
						<td>{{municipio.escuelas_pendientes}}</td>
						<td>{{municipio.escuelas_rechazadas}}</td>						
						{%empty%}

							<td>{{MunicipiosPorZona.zona}}</td>
							<td colspan="5">No tiene municipios registrados</td>
						
						{%endfor%}
						
					</tr>

					{%empty%}

					<tr>
						<td colspan="6">No hay partidas registradas</td>
					</tr>

					{%endfor%}

				</tbody>
			</table>
		</div>
	</div>

{%endblock content%}