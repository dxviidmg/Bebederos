{%extends 'base.html'%}

{%block content%}

	<h1>Region {{region}}: {{region.nombre}}</h1>

	<p><a href="{%url 'accounts:ListViewRegiones'%}">Regresar</a></p>

	<div class="row justify-content-center" >
		<div class="table-responsive text-center">
			<table class="table table-bordered">
				<thead>
					<tr>
						<th rowspan="2">Partida</th>
						<th rowspan="2">Entidad</th>
						<th rowspan="2" colspan="2">Listas</th>
						<th colspan="5">Escuelas</th>
					</tr>
					<tr>
						<th>Asignadas</th>
						<th>Registradas</th>
						<th>Aceptadas</th>
						<th>Pendientes</th>
						<th>Rechazadas</th>
					</tr>
				</thead>
				<tbody class="table-hover">

	{%for EntidadesPorPartida in ListEntidadesPorPartida%}

		{%for entidad in EntidadesPorPartida.entidades%}			
					<tr>		
						
						{%if forloop.first%}
						
						<td rowspan=" {{EntidadesPorPartida.entidades|length}}">
						{{EntidadesPorPartida.partida}}
						</td>
					
						{%endif%}
						<td>{{entidad}}</td>
						<td><a href="{%url 'accounts:ListViewZonas' entidad.slug%}">Por zonas</a></td>

						<td><a href="{%url 'accounts:ListViewAvanceEscuelas' entidad.pk%}">Por escuelas</a></td>
		
						<td>{{entidad.escuelas_asignadas}}</td>
						<td>{{entidad.escuelas_registradas}}{%if entidad.EscuelasCount is None%}{%endif%}</td>
						<td>{{entidad.escuelas_aceptadas}}</td>
						<td>{{entidad.escuelas_pendientes}}</td>
						<td>{{entidad.escuelas_rechazadas}}</td>
					</tr>

		{%empty%}
		
					<tr>
						<td colspan="1">{{EntidadesPorPartida.partida}}</td>
						<td colspan="8">No tiene entidades registradas</td>
					</tr>

		{%endfor%}

	{%empty%}

					<tr>
						<td colspan="7">No hay partidas registradas</td>
					</tr>

	{%endfor%}

				</tbody>
			</table>
		</div>
	</div>

{%endblock content%}